package p139d.p225c.p226a.p227a.p234f.p239e;

import android.util.Pair;
import android.util.SparseArray;
import java.util.ArrayDeque;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;
import java.util.UUID;
import p139d.p225c.p226a.p227a.C2200d;
import p139d.p225c.p226a.p227a.C2676s;
import p139d.p225c.p226a.p227a.C2683z;
import p139d.p225c.p226a.p227a.p231d.C2213m;
import p139d.p225c.p226a.p227a.p234f.C2230b;
import p139d.p225c.p226a.p227a.p234f.C2334n;
import p139d.p225c.p226a.p227a.p234f.InterfaceC2287g;
import p139d.p225c.p226a.p227a.p234f.InterfaceC2289h;
import p139d.p225c.p226a.p227a.p234f.InterfaceC2325i;
import p139d.p225c.p226a.p227a.p234f.InterfaceC2330j;
import p139d.p225c.p226a.p227a.p234f.InterfaceC2335o;
import p139d.p225c.p226a.p227a.p234f.InterfaceC2337q;
import p139d.p225c.p226a.p227a.p234f.p239e.AbstractC2258c;
import p139d.p225c.p226a.p227a.p259k.p260a.C2526h;
import p139d.p225c.p226a.p227a.p270n.C2619F;
import p139d.p225c.p226a.p227a.p270n.C2622I;
import p139d.p225c.p226a.p227a.p270n.C2628e;
import p139d.p225c.p226a.p227a.p270n.C2638o;
import p139d.p225c.p226a.p227a.p270n.C2642s;
import p139d.p225c.p226a.p227a.p270n.C2644u;

/* renamed from: d.c.a.a.f.e.h */
/* loaded from: classes.dex */
public final class C2263h implements InterfaceC2287g {

    /* renamed from: a */
    public static final InterfaceC2330j f8548a = C2256a.f8400a;

    /* renamed from: b */
    private static final int f8549b = C2622I.m11078b("seig");

    /* renamed from: c */
    private static final byte[] f8550c = {-94, 57, 79, 82, 90, -101, 79, 20, -94, 68, 108, 66, 124, 100, -115, -12};

    /* renamed from: d */
    private static final C2676s f8551d = C2676s.m11421a(null, "application/x-emsg", Long.MAX_VALUE);

    /* renamed from: A */
    private long f8552A;

    /* renamed from: B */
    private long f8553B;

    /* renamed from: C */
    private b f8554C;

    /* renamed from: D */
    private int f8555D;

    /* renamed from: E */
    private int f8556E;

    /* renamed from: F */
    private int f8557F;

    /* renamed from: G */
    private boolean f8558G;

    /* renamed from: H */
    private InterfaceC2325i f8559H;

    /* renamed from: I */
    private InterfaceC2337q[] f8560I;

    /* renamed from: J */
    private InterfaceC2337q[] f8561J;

    /* renamed from: K */
    private boolean f8562K;

    /* renamed from: e */
    private final int f8563e;

    /* renamed from: f */
    private final C2268m f8564f;

    /* renamed from: g */
    private final List<C2676s> f8565g;

    /* renamed from: h */
    private final C2213m f8566h;

    /* renamed from: i */
    private final SparseArray<b> f8567i;

    /* renamed from: j */
    private final C2644u f8568j;

    /* renamed from: k */
    private final C2644u f8569k;

    /* renamed from: l */
    private final C2644u f8570l;

    /* renamed from: m */
    private final C2619F f8571m;

    /* renamed from: n */
    private final C2644u f8572n;

    /* renamed from: o */
    private final byte[] f8573o;

    /* renamed from: p */
    private final ArrayDeque<AbstractC2258c.a> f8574p;

    /* renamed from: q */
    private final ArrayDeque<a> f8575q;

    /* renamed from: r */
    private final InterfaceC2337q f8576r;

    /* renamed from: s */
    private int f8577s;

    /* renamed from: t */
    private int f8578t;

    /* renamed from: u */
    private long f8579u;

    /* renamed from: v */
    private int f8580v;

    /* renamed from: w */
    private C2644u f8581w;

    /* renamed from: x */
    private long f8582x;

    /* renamed from: y */
    private int f8583y;

    /* renamed from: z */
    private long f8584z;

    /* renamed from: d.c.a.a.f.e.h$a */
    /* loaded from: classes.dex */
    public static final class a {

        /* renamed from: a */
        public final long f8585a;

        /* renamed from: b */
        public final int f8586b;

        public a(long j, int i) {
            this.f8585a = j;
            this.f8586b = i;
        }
    }

    /* renamed from: d.c.a.a.f.e.h$b */
    /* loaded from: classes.dex */
    public static final class b {

        /* renamed from: a */
        public final InterfaceC2337q f8587a;

        /* renamed from: c */
        public C2268m f8589c;

        /* renamed from: d */
        public C2260e f8590d;

        /* renamed from: e */
        public int f8591e;

        /* renamed from: f */
        public int f8592f;

        /* renamed from: g */
        public int f8593g;

        /* renamed from: h */
        public int f8594h;

        /* renamed from: b */
        public final C2270o f8588b = new C2270o();

        /* renamed from: i */
        private final C2644u f8595i = new C2644u(1);

        /* renamed from: j */
        private final C2644u f8596j = new C2644u();

        public b(InterfaceC2337q interfaceC2337q) {
            this.f8587a = interfaceC2337q;
        }

        /* renamed from: d */
        public C2269n m9377d() {
            C2270o c2270o = this.f8588b;
            int i = c2270o.f8672a.f8538a;
            C2269n c2269n = c2270o.f8686o;
            if (c2269n == null) {
                c2269n = this.f8589c.m9419a(i);
            }
            if (c2269n == null || !c2269n.f8667a) {
                return null;
            }
            return c2269n;
        }

        /* renamed from: e */
        public void m9378e() {
            C2269n m9377d = m9377d();
            if (m9377d == null) {
                return;
            }
            C2644u c2644u = this.f8588b.f8688q;
            int i = m9377d.f8670d;
            if (i != 0) {
                c2644u.m11224f(i);
            }
            if (this.f8588b.m9427c(this.f8591e)) {
                c2644u.m11224f(c2644u.m11244z() * 6);
            }
        }

        /* renamed from: a */
        public void m9379a(long j) {
            long m9048b = C2200d.m9048b(j);
            int i = this.f8591e;
            while (true) {
                C2270o c2270o = this.f8588b;
                if (i >= c2270o.f8677f || c2270o.m9421a(i) >= m9048b) {
                    return;
                }
                if (this.f8588b.f8683l[i]) {
                    this.f8594h = i;
                }
                i++;
            }
        }

        /* renamed from: a */
        public void m9380a(C2213m c2213m) {
            C2269n m9419a = this.f8589c.m9419a(this.f8588b.f8672a.f8538a);
            this.f8587a.mo9433a(this.f8589c.f8661f.m11440a(c2213m.m9092a(m9419a != null ? m9419a.f8668b : null)));
        }

        /* renamed from: a */
        public void m9381a(C2268m c2268m, C2260e c2260e) {
            C2628e.m11110a(c2268m);
            this.f8589c = c2268m;
            C2628e.m11110a(c2260e);
            this.f8590d = c2260e;
            this.f8587a.mo9433a(c2268m.f8661f);
            m9384c();
        }

        /* renamed from: a */
        public boolean m9382a() {
            this.f8591e++;
            this.f8592f++;
            int i = this.f8592f;
            int[] iArr = this.f8588b.f8679h;
            int i2 = this.f8593g;
            if (i != iArr[i2]) {
                return true;
            }
            this.f8593g = i2 + 1;
            this.f8592f = 0;
            return false;
        }

        /* renamed from: b */
        public int m9383b() {
            C2644u c2644u;
            int length;
            C2269n m9377d = m9377d();
            if (m9377d == null) {
                return 0;
            }
            int i = m9377d.f8670d;
            if (i != 0) {
                c2644u = this.f8588b.f8688q;
                length = i;
            } else {
                byte[] bArr = m9377d.f8671e;
                this.f8596j.m11213a(bArr, bArr.length);
                c2644u = this.f8596j;
                length = bArr.length;
            }
            boolean m9427c = this.f8588b.m9427c(this.f8591e);
            this.f8595i.f11004a[0] = (byte) ((m9427c ? 128 : 0) | length);
            this.f8595i.m11222e(0);
            this.f8587a.mo9432a(this.f8595i, 1);
            this.f8587a.mo9432a(c2644u, length);
            if (!m9427c) {
                return length + 1;
            }
            C2644u c2644u2 = this.f8588b.f8688q;
            int m11244z = c2644u2.m11244z();
            c2644u2.m11224f(-2);
            int i2 = (m11244z * 6) + 2;
            this.f8587a.mo9432a(c2644u2, i2);
            return length + 1 + i2;
        }

        /* renamed from: c */
        public void m9384c() {
            this.f8588b.m9422a();
            this.f8591e = 0;
            this.f8593g = 0;
            this.f8592f = 0;
            this.f8594h = 0;
        }
    }

    public C2263h() {
        this(0);
    }

    public C2263h(int i) {
        this(i, null);
    }

    public C2263h(int i, C2619F c2619f) {
        this(i, c2619f, null, null);
    }

    public C2263h(int i, C2619F c2619f, C2268m c2268m, C2213m c2213m) {
        this(i, c2619f, c2268m, c2213m, Collections.emptyList());
    }

    public C2263h(int i, C2619F c2619f, C2268m c2268m, C2213m c2213m, List<C2676s> list) {
        this(i, c2619f, c2268m, c2213m, list, null);
    }

    public C2263h(int i, C2619F c2619f, C2268m c2268m, C2213m c2213m, List<C2676s> list, InterfaceC2337q interfaceC2337q) {
        this.f8563e = i | (c2268m != null ? 8 : 0);
        this.f8571m = c2619f;
        this.f8564f = c2268m;
        this.f8566h = c2213m;
        this.f8565g = Collections.unmodifiableList(list);
        this.f8576r = interfaceC2337q;
        this.f8572n = new C2644u(16);
        this.f8568j = new C2644u(C2642s.f10980a);
        this.f8569k = new C2644u(5);
        this.f8570l = new C2644u();
        this.f8573o = new byte[16];
        this.f8574p = new ArrayDeque<>();
        this.f8575q = new ArrayDeque<>();
        this.f8567i = new SparseArray<>();
        this.f8552A = -9223372036854775807L;
        this.f8584z = -9223372036854775807L;
        this.f8553B = -9223372036854775807L;
        m9368c();
    }

    /* renamed from: a */
    private static int m9340a(b bVar, int i, long j, int i2, C2644u c2644u, int i3) {
        boolean[] zArr;
        long[] jArr;
        long j2;
        boolean z;
        int i4;
        boolean z2;
        int i5;
        boolean z3;
        boolean z4;
        boolean z5;
        c2644u.m11222e(8);
        int m9303b = AbstractC2258c.m9303b(c2644u.m11226h());
        C2268m c2268m = bVar.f8589c;
        C2270o c2270o = bVar.f8588b;
        C2260e c2260e = c2270o.f8672a;
        c2270o.f8679h[i] = c2644u.m11242x();
        long[] jArr2 = c2270o.f8678g;
        jArr2[i] = c2270o.f8674c;
        if ((m9303b & 1) != 0) {
            jArr2[i] = jArr2[i] + c2644u.m11226h();
        }
        boolean z6 = (m9303b & 4) != 0;
        int i6 = c2260e.f8541d;
        if (z6) {
            i6 = c2644u.m11242x();
        }
        boolean z7 = (m9303b & 256) != 0;
        boolean z8 = (m9303b & 512) != 0;
        boolean z9 = (m9303b & 1024) != 0;
        boolean z10 = (m9303b & 2048) != 0;
        long[] jArr3 = c2268m.f8663h;
        long j3 = 0;
        if (jArr3 != null && jArr3.length == 1 && jArr3[0] == 0) {
            j3 = C2622I.m11085c(c2268m.f8664i[0], 1000L, c2268m.f8658c);
        }
        int[] iArr = c2270o.f8680i;
        int[] iArr2 = c2270o.f8681j;
        long[] jArr4 = c2270o.f8682k;
        boolean[] zArr2 = c2270o.f8683l;
        int i7 = i6;
        boolean z11 = c2268m.f8657b == 2 && (i2 & 1) != 0;
        int i8 = i3 + c2270o.f8679h[i];
        long j4 = j3;
        long j5 = c2268m.f8658c;
        if (i > 0) {
            zArr = zArr2;
            jArr = jArr4;
            j2 = c2270o.f8690s;
        } else {
            zArr = zArr2;
            jArr = jArr4;
            j2 = j;
        }
        long j6 = j2;
        int i9 = i3;
        while (i9 < i8) {
            int m11242x = z7 ? c2644u.m11242x() : c2260e.f8539b;
            if (z8) {
                z = z7;
                i4 = c2644u.m11242x();
            } else {
                z = z7;
                i4 = c2260e.f8540c;
            }
            if (i9 == 0 && z6) {
                z2 = z6;
                i5 = i7;
            } else if (z9) {
                z2 = z6;
                i5 = c2644u.m11226h();
            } else {
                z2 = z6;
                i5 = c2260e.f8541d;
            }
            if (z10) {
                z3 = z10;
                z4 = z8;
                z5 = z9;
                iArr2[i9] = (int) ((c2644u.m11226h() * 1000) / j5);
            } else {
                z3 = z10;
                z4 = z8;
                z5 = z9;
                iArr2[i9] = 0;
            }
            jArr[i9] = C2622I.m11085c(j6, 1000L, j5) - j4;
            iArr[i9] = i4;
            zArr[i9] = ((i5 >> 16) & 1) == 0 && (!z11 || i9 == 0);
            i9++;
            j6 += m11242x;
            z7 = z;
            z6 = z2;
            z10 = z3;
            z8 = z4;
            z9 = z5;
            i8 = i8;
        }
        int i10 = i8;
        c2270o.f8690s = j6;
        return i10;
    }

    /* renamed from: a */
    private static Pair<Long, C2230b> m9341a(C2644u c2644u, long j) {
        long m11243y;
        long m11243y2;
        c2644u.m11222e(8);
        int m9304c = AbstractC2258c.m9304c(c2644u.m11226h());
        c2644u.m11224f(4);
        long m11240v = c2644u.m11240v();
        if (m9304c == 0) {
            m11243y = c2644u.m11240v();
            m11243y2 = c2644u.m11240v();
        } else {
            m11243y = c2644u.m11243y();
            m11243y2 = c2644u.m11243y();
        }
        long j2 = m11243y;
        long j3 = j + m11243y2;
        long m11085c = C2622I.m11085c(j2, 1000000L, m11240v);
        c2644u.m11224f(2);
        int m11244z = c2644u.m11244z();
        int[] iArr = new int[m11244z];
        long[] jArr = new long[m11244z];
        long[] jArr2 = new long[m11244z];
        long[] jArr3 = new long[m11244z];
        long j4 = j2;
        long j5 = m11085c;
        int i = 0;
        while (i < m11244z) {
            int m11226h = c2644u.m11226h();
            if ((m11226h & Integer.MIN_VALUE) != 0) {
                throw new C2683z("Unhandled indirect reference");
            }
            long m11240v2 = c2644u.m11240v();
            iArr[i] = m11226h & Integer.MAX_VALUE;
            jArr[i] = j3;
            jArr3[i] = j5;
            j4 += m11240v2;
            long[] jArr4 = jArr2;
            long[] jArr5 = jArr3;
            int i2 = m11244z;
            j5 = C2622I.m11085c(j4, 1000000L, m11240v);
            jArr4[i] = j5 - jArr5[i];
            c2644u.m11224f(4);
            j3 += r1[i];
            i++;
            iArr = iArr;
            jArr3 = jArr5;
            jArr2 = jArr4;
            jArr = jArr;
            m11244z = i2;
        }
        return Pair.create(Long.valueOf(m11085c), new C2230b(iArr, jArr, jArr2, jArr3));
    }

    /* renamed from: a */
    private static C2213m m9342a(List<AbstractC2258c.b> list) {
        int size = list.size();
        ArrayList arrayList = null;
        for (int i = 0; i < size; i++) {
            AbstractC2258c.b bVar = list.get(i);
            if (bVar.f8501Va == AbstractC2258c.f8442U) {
                if (arrayList == null) {
                    arrayList = new ArrayList();
                }
                byte[] bArr = bVar.f8505Wa.f11004a;
                UUID m9410a = C2266k.m9410a(bArr);
                if (m9410a == null) {
                    C2638o.m11160d("FragmentedMp4Extractor", "Skipped pssh atom (failed to extract uuid)");
                } else {
                    arrayList.add(new C2213m.a(m9410a, "video/mp4", bArr));
                }
            }
        }
        if (arrayList == null) {
            return null;
        }
        return new C2213m(arrayList);
    }

    /* renamed from: a */
    private C2260e m9343a(SparseArray<C2260e> sparseArray, int i) {
        C2260e c2260e;
        if (sparseArray.size() == 1) {
            c2260e = sparseArray.valueAt(0);
        } else {
            c2260e = sparseArray.get(i);
            C2628e.m11110a(c2260e);
        }
        return c2260e;
    }

    /* renamed from: a */
    private static b m9344a(SparseArray<b> sparseArray) {
        int size = sparseArray.size();
        b bVar = null;
        long j = Long.MAX_VALUE;
        for (int i = 0; i < size; i++) {
            b valueAt = sparseArray.valueAt(i);
            int i2 = valueAt.f8593g;
            C2270o c2270o = valueAt.f8588b;
            if (i2 != c2270o.f8676e) {
                long j2 = c2270o.f8678g[i2];
                if (j2 < j) {
                    bVar = valueAt;
                    j = j2;
                }
            }
        }
        return bVar;
    }

    /* renamed from: a */
    private static b m9345a(C2644u c2644u, SparseArray<b> sparseArray) {
        c2644u.m11222e(8);
        int m9303b = AbstractC2258c.m9303b(c2644u.m11226h());
        b m9359b = m9359b(sparseArray, c2644u.m11226h());
        if (m9359b == null) {
            return null;
        }
        if ((m9303b & 1) != 0) {
            long m11243y = c2644u.m11243y();
            C2270o c2270o = m9359b.f8588b;
            c2270o.f8674c = m11243y;
            c2270o.f8675d = m11243y;
        }
        C2260e c2260e = m9359b.f8590d;
        m9359b.f8588b.f8672a = new C2260e((m9303b & 2) != 0 ? c2644u.m11242x() - 1 : c2260e.f8538a, (m9303b & 8) != 0 ? c2644u.m11242x() : c2260e.f8539b, (m9303b & 16) != 0 ? c2644u.m11242x() : c2260e.f8540c, (m9303b & 32) != 0 ? c2644u.m11242x() : c2260e.f8541d);
        return m9359b;
    }

    /* renamed from: a */
    private void m9346a(long j) {
        while (!this.f8575q.isEmpty()) {
            a removeFirst = this.f8575q.removeFirst();
            this.f8583y -= removeFirst.f8586b;
            long j2 = removeFirst.f8585a + j;
            C2619F c2619f = this.f8571m;
            if (c2619f != null) {
                j2 = c2619f.m11020a(j2);
            }
            for (InterfaceC2337q interfaceC2337q : this.f8560I) {
                interfaceC2337q.mo9431a(j2, 1, removeFirst.f8586b, this.f8583y, null);
            }
        }
    }

    /* renamed from: a */
    private void m9347a(AbstractC2258c.a aVar) {
        int i = aVar.f8501Va;
        if (i == AbstractC2258c.f8404B) {
            m9369c(aVar);
        } else if (i == AbstractC2258c.f8422K) {
            m9361b(aVar);
        } else {
            if (this.f8574p.isEmpty()) {
                return;
            }
            this.f8574p.peek().m9305a(aVar);
        }
    }

    /* renamed from: a */
    private static void m9348a(AbstractC2258c.a aVar, SparseArray<b> sparseArray, int i, byte[] bArr) {
        int size = aVar.f8504Ya.size();
        for (int i2 = 0; i2 < size; i2++) {
            AbstractC2258c.a aVar2 = aVar.f8504Ya.get(i2);
            if (aVar2.f8501Va == AbstractC2258c.f8424L) {
                m9362b(aVar2, sparseArray, i, bArr);
            }
        }
    }

    /* renamed from: a */
    private static void m9349a(AbstractC2258c.a aVar, b bVar, long j, int i) {
        List<AbstractC2258c.b> list = aVar.f8503Xa;
        int size = list.size();
        int i2 = 0;
        int i3 = 0;
        for (int i4 = 0; i4 < size; i4++) {
            AbstractC2258c.b bVar2 = list.get(i4);
            if (bVar2.f8501Va == AbstractC2258c.f8499z) {
                C2644u c2644u = bVar2.f8505Wa;
                c2644u.m11222e(12);
                int m11242x = c2644u.m11242x();
                if (m11242x > 0) {
                    i3 += m11242x;
                    i2++;
                }
            }
        }
        bVar.f8593g = 0;
        bVar.f8592f = 0;
        bVar.f8591e = 0;
        bVar.f8588b.m9423a(i2, i3);
        int i5 = 0;
        int i6 = 0;
        for (int i7 = 0; i7 < size; i7++) {
            AbstractC2258c.b bVar3 = list.get(i7);
            if (bVar3.f8501Va == AbstractC2258c.f8499z) {
                i6 = m9340a(bVar, i5, j, i, bVar3.f8505Wa, i6);
                i5++;
            }
        }
    }

    /* renamed from: a */
    private void m9350a(AbstractC2258c.b bVar, long j) {
        if (!this.f8574p.isEmpty()) {
            this.f8574p.peek().m9306a(bVar);
            return;
        }
        int i = bVar.f8501Va;
        if (i != AbstractC2258c.f8402A) {
            if (i == AbstractC2258c.f8415Ga) {
                m9352a(bVar.f8505Wa);
            }
        } else {
            Pair<Long, C2230b> m9341a = m9341a(bVar.f8505Wa, j);
            this.f8553B = ((Long) m9341a.first).longValue();
            this.f8559H.mo9673a((InterfaceC2335o) m9341a.second);
            this.f8562K = true;
        }
    }

    /* JADX WARN: Unreachable blocks removed: 1, instructions: 1 */
    /* renamed from: a */
    private static void m9351a(C2269n c2269n, C2644u c2644u, C2270o c2270o) {
        int i;
        int i2 = c2269n.f8670d;
        c2644u.m11222e(8);
        if ((AbstractC2258c.m9303b(c2644u.m11226h()) & 1) == 1) {
            c2644u.m11224f(8);
        }
        int m11238t = c2644u.m11238t();
        int m11242x = c2644u.m11242x();
        if (m11242x != c2270o.f8677f) {
            throw new C2683z("Length mismatch: " + m11242x + ", " + c2270o.f8677f);
        }
        if (m11238t == 0) {
            boolean[] zArr = c2270o.f8685n;
            i = 0;
            for (int i3 = 0; i3 < m11242x; i3++) {
                int m11238t2 = c2644u.m11238t();
                i += m11238t2;
                zArr[i3] = m11238t2 > i2;
            }
        } else {
            i = (m11238t * m11242x) + 0;
            Arrays.fill(c2270o.f8685n, 0, m11242x, m11238t > i2);
        }
        c2270o.m9426b(i);
    }

    /* renamed from: a */
    private void m9352a(C2644u c2644u) {
        InterfaceC2337q[] interfaceC2337qArr = this.f8560I;
        if (interfaceC2337qArr == null || interfaceC2337qArr.length == 0) {
            return;
        }
        c2644u.m11222e(12);
        int m11208a = c2644u.m11208a();
        c2644u.m11235q();
        c2644u.m11235q();
        long m11085c = C2622I.m11085c(c2644u.m11240v(), 1000000L, c2644u.m11240v());
        for (InterfaceC2337q interfaceC2337q : this.f8560I) {
            c2644u.m11222e(12);
            interfaceC2337q.mo9432a(c2644u, m11208a);
        }
        long j = this.f8553B;
        if (j == -9223372036854775807L) {
            this.f8575q.addLast(new a(m11085c, m11208a));
            this.f8583y += m11208a;
            return;
        }
        long j2 = j + m11085c;
        C2619F c2619f = this.f8571m;
        long m11020a = c2619f != null ? c2619f.m11020a(j2) : j2;
        for (InterfaceC2337q interfaceC2337q2 : this.f8560I) {
            interfaceC2337q2.mo9431a(m11020a, 1, m11208a, 0, null);
        }
    }

    /* renamed from: a */
    private static void m9353a(C2644u c2644u, int i, C2270o c2270o) {
        c2644u.m11222e(i + 8);
        int m9303b = AbstractC2258c.m9303b(c2644u.m11226h());
        if ((m9303b & 1) != 0) {
            throw new C2683z("Overriding TrackEncryptionBox parameters is unsupported.");
        }
        boolean z = (m9303b & 2) != 0;
        int m11242x = c2644u.m11242x();
        if (m11242x == c2270o.f8677f) {
            Arrays.fill(c2270o.f8685n, 0, m11242x, z);
            c2270o.m9426b(c2644u.m11208a());
            c2270o.m9425a(c2644u);
        } else {
            throw new C2683z("Length mismatch: " + m11242x + ", " + c2270o.f8677f);
        }
    }

    /* renamed from: a */
    private static void m9354a(C2644u c2644u, C2270o c2270o) {
        c2644u.m11222e(8);
        int m11226h = c2644u.m11226h();
        if ((AbstractC2258c.m9303b(m11226h) & 1) == 1) {
            c2644u.m11224f(8);
        }
        int m11242x = c2644u.m11242x();
        if (m11242x == 1) {
            c2270o.f8675d += AbstractC2258c.m9304c(m11226h) == 0 ? c2644u.m11240v() : c2644u.m11243y();
        } else {
            throw new C2683z("Unexpected saio entry count: " + m11242x);
        }
    }

    /* renamed from: a */
    private static void m9355a(C2644u c2644u, C2270o c2270o, byte[] bArr) {
        c2644u.m11222e(8);
        c2644u.m11214a(bArr, 0, 16);
        if (Arrays.equals(bArr, f8550c)) {
            m9353a(c2644u, 16, c2270o);
        }
    }

    /* renamed from: a */
    private static void m9356a(C2644u c2644u, C2644u c2644u2, String str, C2270o c2270o) {
        byte[] bArr;
        c2644u.m11222e(8);
        int m11226h = c2644u.m11226h();
        if (c2644u.m11226h() != f8549b) {
            return;
        }
        if (AbstractC2258c.m9304c(m11226h) == 1) {
            c2644u.m11224f(4);
        }
        if (c2644u.m11226h() != 1) {
            throw new C2683z("Entry count in sbgp != 1 (unsupported).");
        }
        c2644u2.m11222e(8);
        int m11226h2 = c2644u2.m11226h();
        if (c2644u2.m11226h() != f8549b) {
            return;
        }
        int m9304c = AbstractC2258c.m9304c(m11226h2);
        if (m9304c == 1) {
            if (c2644u2.m11240v() == 0) {
                throw new C2683z("Variable length description in sgpd found (unsupported)");
            }
        } else if (m9304c >= 2) {
            c2644u2.m11224f(4);
        }
        if (c2644u2.m11240v() != 1) {
            throw new C2683z("Entry count in sgpd != 1 (unsupported).");
        }
        c2644u2.m11224f(1);
        int m11238t = c2644u2.m11238t();
        int i = (m11238t & 240) >> 4;
        int i2 = m11238t & 15;
        boolean z = c2644u2.m11238t() == 1;
        if (z) {
            int m11238t2 = c2644u2.m11238t();
            byte[] bArr2 = new byte[16];
            c2644u2.m11214a(bArr2, 0, bArr2.length);
            if (z && m11238t2 == 0) {
                int m11238t3 = c2644u2.m11238t();
                byte[] bArr3 = new byte[m11238t3];
                c2644u2.m11214a(bArr3, 0, m11238t3);
                bArr = bArr3;
            } else {
                bArr = null;
            }
            c2270o.f8684m = true;
            c2270o.f8686o = new C2269n(z, str, m11238t2, bArr2, i, i2, bArr);
        }
    }

    /* renamed from: a */
    private static boolean m9357a(int i) {
        return i == AbstractC2258c.f8404B || i == AbstractC2258c.f8408D || i == AbstractC2258c.f8410E || i == AbstractC2258c.f8412F || i == AbstractC2258c.f8414G || i == AbstractC2258c.f8422K || i == AbstractC2258c.f8424L || i == AbstractC2258c.f8426M || i == AbstractC2258c.f8432P;
    }

    /* renamed from: b */
    private static long m9358b(C2644u c2644u) {
        c2644u.m11222e(8);
        return AbstractC2258c.m9304c(c2644u.m11226h()) == 0 ? c2644u.m11240v() : c2644u.m11243y();
    }

    /* renamed from: b */
    private static b m9359b(SparseArray<b> sparseArray, int i) {
        return sparseArray.size() == 1 ? sparseArray.valueAt(0) : sparseArray.get(i);
    }

    /* renamed from: b */
    private void m9360b(long j) {
        while (!this.f8574p.isEmpty() && this.f8574p.peek().f8502Wa == j) {
            m9347a(this.f8574p.pop());
        }
        m9368c();
    }

    /* renamed from: b */
    private void m9361b(AbstractC2258c.a aVar) {
        m9348a(aVar, this.f8567i, this.f8563e, this.f8573o);
        C2213m m9342a = this.f8566h != null ? null : m9342a(aVar.f8503Xa);
        if (m9342a != null) {
            int size = this.f8567i.size();
            for (int i = 0; i < size; i++) {
                this.f8567i.valueAt(i).m9380a(m9342a);
            }
        }
        if (this.f8584z != -9223372036854775807L) {
            int size2 = this.f8567i.size();
            for (int i2 = 0; i2 < size2; i2++) {
                this.f8567i.valueAt(i2).m9379a(this.f8584z);
            }
            this.f8584z = -9223372036854775807L;
        }
    }

    /* renamed from: b */
    private static void m9362b(AbstractC2258c.a aVar, SparseArray<b> sparseArray, int i, byte[] bArr) {
        b m9345a = m9345a(aVar.m9308e(AbstractC2258c.f8495x).f8505Wa, sparseArray);
        if (m9345a == null) {
            return;
        }
        C2270o c2270o = m9345a.f8588b;
        long j = c2270o.f8690s;
        m9345a.m9384c();
        if (aVar.m9308e(AbstractC2258c.f8493w) != null && (i & 2) == 0) {
            j = m9367c(aVar.m9308e(AbstractC2258c.f8493w).f8505Wa);
        }
        m9349a(aVar, m9345a, j, i);
        C2269n m9419a = m9345a.f8589c.m9419a(c2270o.f8672a.f8538a);
        AbstractC2258c.b m9308e = aVar.m9308e(AbstractC2258c.f8454ca);
        if (m9308e != null) {
            m9351a(m9419a, m9308e.f8505Wa, c2270o);
        }
        AbstractC2258c.b m9308e2 = aVar.m9308e(AbstractC2258c.f8456da);
        if (m9308e2 != null) {
            m9354a(m9308e2.f8505Wa, c2270o);
        }
        AbstractC2258c.b m9308e3 = aVar.m9308e(AbstractC2258c.f8464ha);
        if (m9308e3 != null) {
            m9363b(m9308e3.f8505Wa, c2270o);
        }
        AbstractC2258c.b m9308e4 = aVar.m9308e(AbstractC2258c.f8458ea);
        AbstractC2258c.b m9308e5 = aVar.m9308e(AbstractC2258c.f8460fa);
        if (m9308e4 != null && m9308e5 != null) {
            m9356a(m9308e4.f8505Wa, m9308e5.f8505Wa, m9419a != null ? m9419a.f8668b : null, c2270o);
        }
        int size = aVar.f8503Xa.size();
        for (int i2 = 0; i2 < size; i2++) {
            AbstractC2258c.b bVar = aVar.f8503Xa.get(i2);
            if (bVar.f8501Va == AbstractC2258c.f8462ga) {
                m9355a(bVar.f8505Wa, c2270o, bArr);
            }
        }
    }

    /* renamed from: b */
    private static void m9363b(C2644u c2644u, C2270o c2270o) {
        m9353a(c2644u, 0, c2270o);
    }

    /* renamed from: b */
    private static boolean m9364b(int i) {
        return i == AbstractC2258c.f8438S || i == AbstractC2258c.f8436R || i == AbstractC2258c.f8406C || i == AbstractC2258c.f8402A || i == AbstractC2258c.f8440T || i == AbstractC2258c.f8493w || i == AbstractC2258c.f8495x || i == AbstractC2258c.f8430O || i == AbstractC2258c.f8497y || i == AbstractC2258c.f8499z || i == AbstractC2258c.f8442U || i == AbstractC2258c.f8454ca || i == AbstractC2258c.f8456da || i == AbstractC2258c.f8464ha || i == AbstractC2258c.f8462ga || i == AbstractC2258c.f8458ea || i == AbstractC2258c.f8460fa || i == AbstractC2258c.f8434Q || i == AbstractC2258c.f8428N || i == AbstractC2258c.f8415Ga;
    }

    /* JADX WARN: Removed duplicated region for block: B:14:0x0080  */
    /* JADX WARN: Removed duplicated region for block: B:51:0x0147  */
    /* JADX WARN: Unreachable blocks removed: 1, instructions: 1 */
    /* renamed from: b */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct code enable 'Show inconsistent code' option in preferences
    */
    private boolean m9365b(p139d.p225c.p226a.p227a.p234f.InterfaceC2289h r9) {
        /*
            Method dump skipped, instructions count: 336
            To view this dump change 'Code comments level' option to 'DEBUG'
        */
        throw new UnsupportedOperationException("Method not decompiled: p139d.p225c.p226a.p227a.p234f.p239e.C2263h.m9365b(d.c.a.a.f.h):boolean");
    }

    /* renamed from: b */
    public static /* synthetic */ InterfaceC2287g[] m9366b() {
        return new InterfaceC2287g[]{new C2263h()};
    }

    /* renamed from: c */
    private static long m9367c(C2644u c2644u) {
        c2644u.m11222e(8);
        return AbstractC2258c.m9304c(c2644u.m11226h()) == 1 ? c2644u.m11243y() : c2644u.m11240v();
    }

    /* renamed from: c */
    private void m9368c() {
        this.f8577s = 0;
        this.f8580v = 0;
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* renamed from: c */
    private void m9369c(AbstractC2258c.a aVar) {
        int i;
        int i2;
        int i3 = 0;
        C2628e.m11114b(this.f8564f == null, "Unexpected moov box.");
        C2213m c2213m = this.f8566h;
        if (c2213m == null) {
            c2213m = m9342a(aVar.f8503Xa);
        }
        AbstractC2258c.a m9307d = aVar.m9307d(AbstractC2258c.f8426M);
        SparseArray sparseArray = new SparseArray();
        int size = m9307d.f8503Xa.size();
        long j = -9223372036854775807L;
        for (int i4 = 0; i4 < size; i4++) {
            AbstractC2258c.b bVar = m9307d.f8503Xa.get(i4);
            int i5 = bVar.f8501Va;
            if (i5 == AbstractC2258c.f8497y) {
                Pair<Integer, C2260e> m9371d = m9371d(bVar.f8505Wa);
                sparseArray.put(((Integer) m9371d.first).intValue(), m9371d.second);
            } else if (i5 == AbstractC2258c.f8428N) {
                j = m9358b(bVar.f8505Wa);
            }
        }
        SparseArray sparseArray2 = new SparseArray();
        int size2 = aVar.f8504Ya.size();
        int i6 = 0;
        while (i6 < size2) {
            AbstractC2258c.a aVar2 = aVar.f8504Ya.get(i6);
            if (aVar2.f8501Va == AbstractC2258c.f8408D) {
                i = i6;
                i2 = size2;
                C2268m m9314a = C2259d.m9314a(aVar2, aVar.m9308e(AbstractC2258c.f8406C), j, c2213m, (this.f8563e & 16) != 0, false);
                if (m9314a != null) {
                    sparseArray2.put(m9314a.f8656a, m9314a);
                }
            } else {
                i = i6;
                i2 = size2;
            }
            i6 = i + 1;
            size2 = i2;
        }
        int size3 = sparseArray2.size();
        if (this.f8567i.size() != 0) {
            C2628e.m11113b(this.f8567i.size() == size3);
            while (i3 < size3) {
                C2268m c2268m = (C2268m) sparseArray2.valueAt(i3);
                this.f8567i.get(c2268m.f8656a).m9381a(c2268m, m9343a((SparseArray<C2260e>) sparseArray, c2268m.f8656a));
                i3++;
            }
            return;
        }
        while (i3 < size3) {
            C2268m c2268m2 = (C2268m) sparseArray2.valueAt(i3);
            b bVar2 = new b(this.f8559H.mo9671a(i3, c2268m2.f8657b));
            bVar2.m9381a(c2268m2, m9343a((SparseArray<C2260e>) sparseArray, c2268m2.f8656a));
            this.f8567i.put(c2268m2.f8656a, bVar2);
            this.f8552A = Math.max(this.f8552A, c2268m2.f8660e);
            i3++;
        }
        m9372d();
        this.f8559H.mo9672a();
    }

    /* renamed from: c */
    private void m9370c(InterfaceC2289h interfaceC2289h) {
        int i = ((int) this.f8579u) - this.f8580v;
        C2644u c2644u = this.f8581w;
        if (c2644u != null) {
            interfaceC2289h.readFully(c2644u.f11004a, 8, i);
            m9350a(new AbstractC2258c.b(this.f8578t, this.f8581w), interfaceC2289h.getPosition());
        } else {
            interfaceC2289h.mo9283c(i);
        }
        m9360b(interfaceC2289h.getPosition());
    }

    /* renamed from: d */
    private static Pair<Integer, C2260e> m9371d(C2644u c2644u) {
        c2644u.m11222e(12);
        return Pair.create(Integer.valueOf(c2644u.m11226h()), new C2260e(c2644u.m11242x() - 1, c2644u.m11242x(), c2644u.m11242x(), c2644u.m11226h()));
    }

    /* renamed from: d */
    private void m9372d() {
        int i;
        if (this.f8560I == null) {
            this.f8560I = new InterfaceC2337q[2];
            InterfaceC2337q interfaceC2337q = this.f8576r;
            if (interfaceC2337q != null) {
                this.f8560I[0] = interfaceC2337q;
                i = 1;
            } else {
                i = 0;
            }
            if ((this.f8563e & 4) != 0) {
                this.f8560I[i] = this.f8559H.mo9671a(this.f8567i.size(), 4);
                i++;
            }
            this.f8560I = (InterfaceC2337q[]) Arrays.copyOf(this.f8560I, i);
            for (InterfaceC2337q interfaceC2337q2 : this.f8560I) {
                interfaceC2337q2.mo9433a(f8551d);
            }
        }
        if (this.f8561J == null) {
            this.f8561J = new InterfaceC2337q[this.f8565g.size()];
            for (int i2 = 0; i2 < this.f8561J.length; i2++) {
                InterfaceC2337q mo9671a = this.f8559H.mo9671a(this.f8567i.size() + 1 + i2, 3);
                mo9671a.mo9433a(this.f8565g.get(i2));
                this.f8561J[i2] = mo9671a;
            }
        }
    }

    /* JADX WARN: Unreachable blocks removed: 1, instructions: 1 */
    /* renamed from: d */
    private void m9373d(InterfaceC2289h interfaceC2289h) {
        int size = this.f8567i.size();
        b bVar = null;
        long j = Long.MAX_VALUE;
        for (int i = 0; i < size; i++) {
            C2270o c2270o = this.f8567i.valueAt(i).f8588b;
            if (c2270o.f8689r) {
                long j2 = c2270o.f8675d;
                if (j2 < j) {
                    bVar = this.f8567i.valueAt(i);
                    j = j2;
                }
            }
        }
        if (bVar == null) {
            this.f8577s = 3;
            return;
        }
        int position = (int) (j - interfaceC2289h.getPosition());
        if (position < 0) {
            throw new C2683z("Offset to encryption data was negative.");
        }
        interfaceC2289h.mo9283c(position);
        bVar.f8588b.m9424a(interfaceC2289h);
    }

    /* renamed from: e */
    private boolean m9374e(InterfaceC2289h interfaceC2289h) {
        int i;
        InterfaceC2337q.a aVar;
        int mo9430a;
        int i2 = 4;
        int i3 = 1;
        int i4 = 0;
        if (this.f8577s == 3) {
            if (this.f8554C == null) {
                b m9344a = m9344a(this.f8567i);
                if (m9344a == null) {
                    int position = (int) (this.f8582x - interfaceC2289h.getPosition());
                    if (position < 0) {
                        throw new C2683z("Offset to end of mdat was negative.");
                    }
                    interfaceC2289h.mo9283c(position);
                    m9368c();
                    return false;
                }
                int position2 = (int) (m9344a.f8588b.f8678g[m9344a.f8593g] - interfaceC2289h.getPosition());
                if (position2 < 0) {
                    C2638o.m11160d("FragmentedMp4Extractor", "Ignoring negative offset to sample data.");
                    position2 = 0;
                }
                interfaceC2289h.mo9283c(position2);
                this.f8554C = m9344a;
            }
            b bVar = this.f8554C;
            int[] iArr = bVar.f8588b.f8680i;
            int i5 = bVar.f8591e;
            this.f8555D = iArr[i5];
            if (i5 < bVar.f8594h) {
                interfaceC2289h.mo9283c(this.f8555D);
                this.f8554C.m9378e();
                if (!this.f8554C.m9382a()) {
                    this.f8554C = null;
                }
                this.f8577s = 3;
                return true;
            }
            if (bVar.f8589c.f8662g == 1) {
                this.f8555D -= 8;
                interfaceC2289h.mo9283c(8);
            }
            this.f8556E = this.f8554C.m9383b();
            this.f8555D += this.f8556E;
            this.f8577s = 4;
            this.f8557F = 0;
        }
        b bVar2 = this.f8554C;
        C2270o c2270o = bVar2.f8588b;
        C2268m c2268m = bVar2.f8589c;
        InterfaceC2337q interfaceC2337q = bVar2.f8587a;
        int i6 = bVar2.f8591e;
        long m9421a = c2270o.m9421a(i6) * 1000;
        C2619F c2619f = this.f8571m;
        if (c2619f != null) {
            m9421a = c2619f.m11020a(m9421a);
        }
        long j = m9421a;
        int i7 = c2268m.f8665j;
        if (i7 == 0) {
            while (true) {
                int i8 = this.f8556E;
                int i9 = this.f8555D;
                if (i8 >= i9) {
                    break;
                }
                this.f8556E += interfaceC2337q.mo9430a(interfaceC2289h, i9 - i8, false);
            }
        } else {
            byte[] bArr = this.f8569k.f11004a;
            bArr[0] = 0;
            bArr[1] = 0;
            bArr[2] = 0;
            int i10 = i7 + 1;
            int i11 = 4 - i7;
            while (this.f8556E < this.f8555D) {
                int i12 = this.f8557F;
                if (i12 == 0) {
                    interfaceC2289h.readFully(bArr, i11, i10);
                    this.f8569k.m11222e(i4);
                    this.f8557F = this.f8569k.m11242x() - i3;
                    this.f8568j.m11222e(i4);
                    interfaceC2337q.mo9432a(this.f8568j, i2);
                    interfaceC2337q.mo9432a(this.f8569k, i3);
                    this.f8558G = this.f8561J.length > 0 && C2642s.m11184a(c2268m.f8661f.f11182g, bArr[i2]);
                    this.f8556E += 5;
                    this.f8555D += i11;
                } else {
                    if (this.f8558G) {
                        this.f8570l.m11218c(i12);
                        interfaceC2289h.readFully(this.f8570l.f11004a, i4, this.f8557F);
                        interfaceC2337q.mo9432a(this.f8570l, this.f8557F);
                        mo9430a = this.f8557F;
                        C2644u c2644u = this.f8570l;
                        int m11187c = C2642s.m11187c(c2644u.f11004a, c2644u.m11219d());
                        this.f8570l.m11222e("video/hevc".equals(c2268m.f8661f.f11182g) ? 1 : 0);
                        this.f8570l.m11220d(m11187c);
                        C2526h.m10608a(j, this.f8570l, this.f8561J);
                    } else {
                        mo9430a = interfaceC2337q.mo9430a(interfaceC2289h, i12, false);
                    }
                    this.f8556E += mo9430a;
                    this.f8557F -= mo9430a;
                    i2 = 4;
                    i3 = 1;
                    i4 = 0;
                }
            }
        }
        boolean z = c2270o.f8683l[i6];
        C2269n m9377d = this.f8554C.m9377d();
        if (m9377d != null) {
            i = (z ? 1 : 0) | 1073741824;
            aVar = m9377d.f8669c;
        } else {
            i = z ? 1 : 0;
            aVar = null;
        }
        interfaceC2337q.mo9431a(j, i, this.f8555D, 0, aVar);
        m9346a(j);
        if (!this.f8554C.m9382a()) {
            this.f8554C = null;
        }
        this.f8577s = 3;
        return true;
    }

    @Override // p139d.p225c.p226a.p227a.p234f.InterfaceC2287g
    /* renamed from: a */
    public int mo9157a(InterfaceC2289h interfaceC2289h, C2334n c2334n) {
        while (true) {
            int i = this.f8577s;
            if (i != 0) {
                if (i == 1) {
                    m9370c(interfaceC2289h);
                } else if (i == 2) {
                    m9373d(interfaceC2289h);
                } else if (m9374e(interfaceC2289h)) {
                    return 0;
                }
            } else if (!m9365b(interfaceC2289h)) {
                return -1;
            }
        }
    }

    @Override // p139d.p225c.p226a.p227a.p234f.InterfaceC2287g
    /* renamed from: a */
    public void mo9158a() {
    }

    @Override // p139d.p225c.p226a.p227a.p234f.InterfaceC2287g
    /* renamed from: a */
    public void mo9159a(long j, long j2) {
        int size = this.f8567i.size();
        for (int i = 0; i < size; i++) {
            this.f8567i.valueAt(i).m9384c();
        }
        this.f8575q.clear();
        this.f8583y = 0;
        this.f8584z = j2;
        this.f8574p.clear();
        m9368c();
    }

    @Override // p139d.p225c.p226a.p227a.p234f.InterfaceC2287g
    /* renamed from: a */
    public void mo9160a(InterfaceC2325i interfaceC2325i) {
        this.f8559H = interfaceC2325i;
        C2268m c2268m = this.f8564f;
        if (c2268m != null) {
            b bVar = new b(interfaceC2325i.mo9671a(0, c2268m.f8657b));
            bVar.m9381a(this.f8564f, new C2260e(0, 0, 0, 0));
            this.f8567i.put(0, bVar);
            m9372d();
            this.f8559H.mo9672a();
        }
    }

    @Override // p139d.p225c.p226a.p227a.p234f.InterfaceC2287g
    /* renamed from: a */
    public boolean mo9161a(InterfaceC2289h interfaceC2289h) {
        return C2267l.m9416a(interfaceC2289h);
    }
}
